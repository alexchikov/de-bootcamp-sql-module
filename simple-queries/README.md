# SQL: Simple queries

---

[TOC]

---

**SQL (Structured Query Language)** &mdash; предметно-ориентированный язык, используемый для управления данными, особенно в системах управления реляционными базами данных (СУБД).

## Структура SQL запроса


Структура SQL запроса не так уж и сложна и может быть представлена следующим образом:

```sql
[SELECT] col
[FROM] t
JOIN t2 ON join_condition
WHERE condition
GROUP BY col1, col2
HAVING another_condition
ORDER BY col
```

В квадратных скобках отмечены операторы обязательные для каждого запроса (хотя если вы хотите просто, что-то вывести, то можно обойтись даже и без `FROM`).

Теперь рассмотрим, в каком порядке будут выполняться операторы из нашего SQL запроса:
1. Первым будет обработан оператор `FROM`. Он указывает на место, откуда необходимо получить данные. Также сюда можно отнести и оператор `JOIN`, если он используется. В нем мы также можем указать другой источник данных, который хотим присоединить к первому.
2. Далее будет обработан оператор `WHERE`. Он отвечает за фильтрацию источника по заданому условию.
3. После этого будет выполнен оператор группировки `GROUP BY`. Он группирует данные по определенным столбцам. Затем мы можем, например, применить к этим группам агрегирующие функции.
4. После этого будет обработан оператор `HAVING`. Он проводит фильтрацию уже по сгруппированным данным.
5. Затем обрабатывается оператор `SELECT`, казалось бы указанный самым первым в запросе, но он будет обработан одним из последних. В нем мы указываем данные которые хотим получить в результате выполнения запроса.
6. Последним будет обработан `ORDER BY`. Здесь мы указываем столбцы, по которым хотим провести сортировку данных, полученных в результате всех предыдущих шагов. Для описания характера сортировки (то есть по убыванию или по возрастанию) используются ключевые слова `ASC` или `DESC`, что означает соответственно ascending или descending. Однако слово `ASC` можно не указывать, так как сортировка по умолчанию проводится по возрастанию.

## Фильтрация данных

Для фильтрации данных используются оператор `WHERE` и реже `HAVING`. Для того, чтобы отфильтровать данные, необходимо задать условие, по которому будут отбираться данные. Это могут быть разные условия и для каждой специфики существуют различные операторы сравнения или условия:
1. Самые базовые это математические операторы сравнения `>`, `<`, `=` и `!=`. Они, соответственно, означают "больше", "меньше", "равно" и "не равно". Таким образом, с помощью таких операторов мы можем проверять на равенство значения определенных столбцов или сравнивать математические значения. Пример запроса с такими операторами:
   ```sql
   SELECT id
   FROM some_table
   WHERE id = 5
   ```
2. Также можно использовать сложные условия для фильтрации данных с помощью `AND` и `OR`. Пример запроса с таким условием:
   ```sql
   SELECT id
   FROM some_table
   WHERE customer_name = 'Вася' OR (id < 5 AND id >= 2)
   ```
